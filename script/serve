#!/bin/bash

set -e # If anything fails, stop the script.
set -u # If an undefined variable is expanded, stop the script.

function run_server() {
    if [[ "$(python --version)" =~ 'Python 3' ]]; then
        python -m http.server ${PORT}
    else
        python -m SimpleHTTPServer ${PORT}
    fi
}

PORT="${1:-8000}"
root="$(git rev-parse --show-toplevel)"

cd "${root}/source"

run_server
